<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>20.3. REST: Practical Fundamentals &#8212; C# Web Development  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="20.4. Exercises: Web APIs and REST" href="exercises.html" />
    <link rel="prev" title="20.2. What is REST?" href="rest-abstract.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html"><span class="section-number">20. </span>Introduction to Web APIs &amp; REST</a></li>
    <li class="active"><span class="section-number">20.3. </span>REST: Practical Fundamentals</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content " role="main">

    
  <div class="section" id="rest-practical-fundamentals">
<h1><span class="section-number">20.3. </span>REST: Practical Fundamentals<a class="headerlink" href="#rest-practical-fundamentals" title="Permalink to this headline">¶</a></h1>
<p>Here’s a takeaway of the abstract ideas we covered on the last page:</p>
<ul class="simple">
<li><p><strong>State</strong>: data that can change (transition) through interactions between an API and its client</p></li>
<li><p><strong>Representation</strong>: the convertible format that enables state to be transferred and used by the client and API</p></li>
<li><p><strong>Resource</strong>: the representation of a type of state (as an entity or collection) that the API exposes to its client for interaction</p></li>
</ul>
<p>Now that you have an understanding of these concepts, let’s turn our attention to the practical details of working with REST APIs.
The following sections reference the CodingEvents MVC project we’ve been creating over the last several lessons to illustrate
the capabilities of an alternative CodingEvents API project.</p>
<div class="section" id="shapes">
<span id="index-0"></span><h2><span class="section-number">20.3.1. </span>Shapes<a class="headerlink" href="#shapes" title="Permalink to this headline">¶</a></h2>
<p><strong>Shape</strong> describes the input or output of an API in terms of its fields and data types. There are no rules for how shapes should be defined. However, the
goal should be to describe shapes in a way that is easy to understand. For this reason, shapes are typically shown in a way that is similar to the
representation format. Because we use JSON as the representation format, the
<a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/type.html" target="_blank">JSON data types<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> are used.</p>
<p>You can think of shape like a class definition in an object-oriented codebase:</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<div class="highlight-csharp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">CodingEvent</span> <span class="p">{</span>
   <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">public</span> <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">public</span> <span class="kt">string</span> <span class="n">Description</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">public</span> <span class="n">DateTime</span> <span class="n">Date</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Notice, the class called <code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code> is equivalent to the <code class="docutils literal notranslate"><span class="pre">Event</span></code> class in our MVC application.</p>
<p>The output resource shape of a CodingEvent entity:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span>CodingEvent <span class="o">{</span>
   Id: integer
   Title: string
   Description: string
   Date: string <span class="o">(</span>ISO <span class="m">8601</span> date format<span class="o">)</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The JSON representation of the resource that the API sends out is then based on the shape. This is like how an object is based on
the blueprint of its class.</p>
<p>Here’s a CodingEvent JSON Representation:</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">{</span>
   <span class="s2">&quot;Id&quot;</span>: <span class="m">1</span>,
   <span class="s2">&quot;Title&quot;</span>: <span class="s2">&quot;Halloween Hackathon!&quot;</span>,
   <span class="s2">&quot;Description&quot;</span>: <span class="s2">&quot;A gathering of nerdy ghouls to work on GitHub Hacktoberfest contributions&quot;</span>,
   <span class="s2">&quot;Date&quot;</span>: <span class="s2">&quot;2020-10-31&quot;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>We can think of inputs as a <em>partial state</em> provided by the client during create and update operations. Only some of the fields
are included because the API is responsible for providing the others.</p>
<p>Consider the following example of an input shape used to create an event. Notice that the <code class="docutils literal notranslate"><span class="pre">Id</span></code> field is not included:</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>CodingEvent <span class="o">{</span>
   Title: string
   Description: string
   Date: string <span class="o">(</span>ISO <span class="m">8601</span> date format<span class="o">)</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Some of the common fields the API is responsible for managing:</p>
<ul class="simple">
<li><p>the unique identifier (<code class="docutils literal notranslate"><span class="pre">Id</span></code>)</p></li>
<li><p>the “created on” or “last updated” timestamp</p></li>
<li><p>links for relationships between resources</p></li>
</ul>
</div>
</div>
<div class="section" id="endpoints">
<span id="index-1"></span><h2><span class="section-number">20.3.2. </span>Endpoints<a class="headerlink" href="#endpoints" title="Permalink to this headline">¶</a></h2>
<p>An API <strong>endpoint</strong> refers to the HTTP path and method that defines the location of a resource and the action to take on its state.</p>
<p>Endpoints are what an API exposes to its consumers. Each endpoint is made up of two components:</p>
<ul class="simple">
<li><p><strong>path</strong>: the noun that identifies the resource</p></li>
<li><p><strong>method</strong>: the verb, or action, to take on the resource’s state</p></li>
</ul>
<div class="section" id="identifying-the-resource">
<h3><span class="section-number">20.3.2.1. </span>Identifying the Resource<a class="headerlink" href="#identifying-the-resource" title="Permalink to this headline">¶</a></h3>
<p>Paths are used to identify the resource being interacted with. Recall the hierarchal nature of resources where an entity only
exists within a collection. RESTful APIs separate the resources they expose into one or more resource entry-points.</p>
<p>Let’s consider two resources exposed by a RESTful API:</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>The CodingEvents API would have the following familiar resources (among others):</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Resource and corresponding collection entry-point</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Resource</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Tag</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Path</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/events</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/tags</span></code></p></td>
</tr>
</tbody>
</table>
<p>The name of the path is arbitrary but should follow these rules of thumb to maintain consistency:</p>
<ul class="simple">
<li><p>is lowercase and separated by underscores if necessary</p></li>
<li><p>adequately describes the resource in as few characters as necessary</p></li>
<li><p>is a plural noun (actions are described by the method of the endpoint)</p></li>
</ul>
</div>
<p>Let’s see this in action with a CodingEvents API. Using what we have learned so far, we can expect the state of the resource
collection to be represented in a JSON array:</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>Here is a response from a request to the GET <code class="docutils literal notranslate"><span class="pre">/events</span></code> endpoint:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">[</span>
   CodingEvent <span class="o">{</span> ... <span class="o">}</span>,
   ...
<span class="o">]</span>
</pre></div>
</td></tr></table></div>
<p>The state of the <code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code> collection is made up of the collective state of each <code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code> entity within it.</p>
</div>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>Here is a response from a request to the GET <code class="docutils literal notranslate"><span class="pre">/tags</span></code> endpoint:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">[</span>
   Tag <span class="o">{</span> ... <span class="o">}</span>,
   ...
<span class="o">]</span>
</pre></div>
</td></tr></table></div>
<p>A request to the endpoint of the <code class="docutils literal notranslate"><span class="pre">Tag</span></code> collection would include its respective <code class="docutils literal notranslate"><span class="pre">Tag</span></code> entity representations (JSON objects).</p>
</div>
<p>Suppose we wanted to interact with an individual resource entity. We would need to identify it within its collection.</p>
<p>The path to identify a resource entity would need to include:</p>
<ul class="simple">
<li><p>the collection identifier, or resource entry-point (<code class="docutils literal notranslate"><span class="pre">/collection</span></code>)</p></li>
<li><p>the unique resource entity identifier (<code class="docutils literal notranslate"><span class="pre">/{entityId}</span></code>) within the collection</p></li>
</ul>
<p>Because the unique identifier of the entity is variable, we use a path variable (<code class="docutils literal notranslate"><span class="pre">{entityId}</span></code>) to describe it in a generic way.</p>
<div class="admonition-tip admonition">
<p class="admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>The hierarchy of collections and entities is similar to directories and files. To identify an entity is like identifying a
file within a directory. You need both the directory (collection) name and a sub-path that uniquely identifies the file (entity).</p>
</div>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>The generic path to identify a <code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code> resource is noted as <code class="docutils literal notranslate"><span class="pre">/events/{codingEventId}</span></code>.</p>
<p>Let’s assume a CodingEvent entity exists with an <code class="docutils literal notranslate"><span class="pre">Id</span></code> of <code class="docutils literal notranslate"><span class="pre">12</span></code>.</p>
<p>We could make a request to the <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/events/12</span></code> endpoint to read its current state and receive this response:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">{</span>
   <span class="s2">&quot;Id&quot;</span>: <span class="m">12</span>,
   <span class="s2">&quot;Title&quot;</span>: <span class="s2">&quot;Halloween Hackathon!&quot;</span>,
   <span class="s2">&quot;Description&quot;</span>: <span class="s2">&quot;A gathering of nerdy ghouls...&quot;</span>,
   <span class="s2">&quot;Date&quot;</span>: <span class="s2">&quot;2020-10-31&quot;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="crud-operations-http-methods">
<h3><span class="section-number">20.3.2.2. </span>CRUD Operations &amp; HTTP Methods<a class="headerlink" href="#crud-operations-http-methods" title="Permalink to this headline">¶</a></h3>
<p>As we saw in the previous article, state is something that can be interacted with using CRUD operations. By convention, each of these
operations corresponds to an HTTP method:</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">HTTP method and corresponding CRUD operation</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p>HTTP method</p></th>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT/PATCH</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p>CRUD operation</p></th>
<td><p>Create</p></td>
<td><p>Read</p></td>
<td><p>Update</p></td>
<td><p>Delete</p></td>
</tr>
</tbody>
</table>
<p>The use case of an API dictates the design of its contract. This includes which actions the client can take on each resource. In
other words, not every action must be exposed for each resource the API manages.</p>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>If a client tries to take an action on a resource that is not supported by the API, they will receive a <code class="docutils literal notranslate"><span class="pre">405</span></code> status code or
<code class="docutils literal notranslate"><span class="pre">Method</span> <span class="pre">not</span> <span class="pre">allowed</span></code> error response.</p>
</div>
</div>
</div>
<div class="section" id="endpoint-behavior">
<h2><span class="section-number">20.3.3. </span>Endpoint Behavior<a class="headerlink" href="#endpoint-behavior" title="Permalink to this headline">¶</a></h2>
<p>Depending on the endpoint, the effect of a request can differ. In other words, the behavior of an endpoint is dependent on the subject – an entity or
the collection as a whole.</p>
<div class="section" id="operating-on-collections">
<h3><span class="section-number">20.3.3.1. </span>Operating On Collections<a class="headerlink" href="#operating-on-collections" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Endpoint behaviors for a resource collection</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p>HTTP method</p></th>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT/PATCH</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p>Behavior with resource state</p></th>
<td><p>create a new entity in the collection</p></td>
<td><p>view the current list of all entities in the collection</p></td>
<td><p>bulk update of entities in the collection</p></td>
<td><p>remove all entities in the collection</p></td>
</tr>
</tbody>
</table>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>Exposing the ability to modify or delete all of the entities in a collection at once can be risky. In many cases, the design of a RESTful API will
only support <code class="docutils literal notranslate"><span class="pre">GET</span></code> and <code class="docutils literal notranslate"><span class="pre">POST</span></code> endpoints for collections.</p>
</div>
<p>Let’s consider a request for creating a resource entity. Recall that this operation acts on the state of the collection by
adding a new entity to it.</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>As we saw earlier, the input shape for creating an event only includes the fields the consumer is responsible for. The <code class="docutils literal notranslate"><span class="pre">Id</span></code>
field is then managed internally by the API.</p>
<p>We refer to this shape as a <code class="docutils literal notranslate"><span class="pre">NewCodingEvent</span></code> to distinguish it from the <code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code> resource shape:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>NewCodingEvent <span class="o">{</span>
   Title: string
   Description: string
   Date: string <span class="o">(</span>ISO <span class="m">8601</span> date format<span class="o">)</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>We can describe this request in a shorthand:</p>
<p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/events</span> <span class="pre">(NewCodingEvent)</span> <span class="pre">-&gt;</span> <span class="pre">201,</span> <span class="pre">CodingEvent</span></code></p>
<p>This shorthand includes:</p>
<ol class="arabic simple">
<li><p>The endpoint method: <code class="docutils literal notranslate"><span class="pre">POST</span></code></p></li>
<li><p>The endpoint path: <code class="docutils literal notranslate"><span class="pre">/events</span></code></p></li>
<li><p>The name of the request body: <code class="docutils literal notranslate"><span class="pre">(NewCodingEvent)</span></code></p></li>
<li><p>The returned status code: <code class="docutils literal notranslate"><span class="pre">201</span></code></p></li>
<li><p>The returned response body: <code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code></p></li>
</ol>
<p>After sending this request, the response includes:</p>
<ul class="simple">
<li><p>a <code class="docutils literal notranslate"><span class="pre">201</span></code>, or <code class="docutils literal notranslate"><span class="pre">Created</span></code>, status code</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">Location</span></code> response header</p></li>
<li><p>the representation of the created resource entity state (including an assigned <code class="docutils literal notranslate"><span class="pre">Id</span></code> field)</p></li>
</ul>
</div>
</div>
<div class="section" id="operating-on-entities">
<h3><span class="section-number">20.3.3.2. </span>Operating On Entities<a class="headerlink" href="#operating-on-entities" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">Endpoint behaviors for an individual resource entity</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p>HTTP method</p></th>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT/PATCH</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p>Behavior with resource state</p></th>
<td><p>N/A (created inside a collection)</p></td>
<td><p>view the current entity state</p></td>
<td><p>update the entity state</p></td>
<td><p>remove the entity from the collection</p></td>
</tr>
</tbody>
</table>
<p>When removing a resource, the client is requesting a transition to an empty state. This means that both the request body and response body that are
transferred (the representations of state) are empty. We can see this behavior in action with a request to the <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> endpoint for a single resource
entity in our example API:</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>Let’s once again assume a <code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code> resource exists with an <code class="docutils literal notranslate"><span class="pre">Id</span></code> of <code class="docutils literal notranslate"><span class="pre">12</span></code>. If we want to remove this entity, we need to issue a request to
its uniquely identified <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> endpoint:</p>
<p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/events/12</span> <span class="pre">-&gt;</span> <span class="pre">204</span></code></p>
<p>In this shorthand, you can see that this request has an empty request body. This is the empty state we are requesting a transition to.
The <code class="docutils literal notranslate"><span class="pre">204</span></code>, or <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">Content</span></code>, status code in the response indicates that the action was successful and that the response body is empty. The API
transfers back a representation of empty state (no response body) to the client.</p>
</div>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>What would happen if we made another request to the endpoint of a resource entity that doesn’t exist, <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/events/999</span></code>?</p>
<p>We would receive a <code class="docutils literal notranslate"><span class="pre">404</span></code>, or <code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">Found</span></code>, status code that lets us know the request failed because of a client error
(providing an <code class="docutils literal notranslate"><span class="pre">Id</span></code> for a nonexistent resource).</p>
</div>
</div>
</div>
<div class="section" id="headers-status-codes">
<h2><span class="section-number">20.3.4. </span>Headers &amp; Status Codes<a class="headerlink" href="#headers-status-codes" title="Permalink to this headline">¶</a></h2>
<p>A RESTful API uses HTTP response status codes and HTTP request and response headers. Response status codes inform
the client if their request is handled successfully or if changes are needed to fix a request. HTTP headers are used to communicate additional information
(metadata) about a request or response. Let’s take a look at the status codes now.</p>
<div class="section" id="status-codes">
<h3><span class="section-number">20.3.4.1. </span>Status Codes<a class="headerlink" href="#status-codes" title="Permalink to this headline">¶</a></h3>
<p>Every RESTful API response includes a status code that indicates whether the client’s request has succeeded or failed.</p>
<div class="section" id="success-status-codes">
<h4><span class="section-number">20.3.4.1.1. </span>Success Status Codes<a class="headerlink" href="#success-status-codes" title="Permalink to this headline">¶</a></h4>
<p>When a request is successful, the <code class="docutils literal notranslate"><span class="pre">2XX</span></code> status codes are used. These codes communicate to the consumer the type of success relative to the action that
was taken. Below is a list of the common success codes you will encounter:</p>
<table class="colwidths-given docutils align-default" id="id5">
<caption><span class="caption-text">Common client success status codes for each action</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>HTTP method</p></th>
<th class="head"><p>Status code</p></th>
<th class="head"><p>Message</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">POST</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">201</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Created</span></code></p></td>
<td><p>Resource entity and <code class="docutils literal notranslate"><span class="pre">Location</span></code> header</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">GET</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">200</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OK</span></code></p></td>
<td><p>Resource entity or collection</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">204</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">Content</span></code></p></td>
<td><p>empty response body</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="failure-status-codes">
<h4><span class="section-number">20.3.4.1.2. </span>Failure Status Codes<a class="headerlink" href="#failure-status-codes" title="Permalink to this headline">¶</a></h4>
<p>Requests can fail. Status code groups categorize two types of failure:</p>
<ul class="simple">
<li><p><strong>client error</strong>: <code class="docutils literal notranslate"><span class="pre">4XX</span></code> status code group</p></li>
<li><p><strong>server error</strong>: <code class="docutils literal notranslate"><span class="pre">5XX</span></code> status code group</p></li>
</ul>
<p>Client errors indicate that a request can be reissued with corrections. Each of these
status codes and messages notify the consumer of the changes needed for a success. In contrast, server errors cannot be remedied by the client sending the
request.</p>
<p>Let’s look at some of the common client error status codes:</p>
<table class="colwidths-given docutils align-default" id="id6">
<caption><span class="caption-text">Common client error status codes</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Status code</p></th>
<th class="head"><p>Message</p></th>
<th class="head"><p>Correction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">400</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Bad</span> <span class="pre">Request</span></code></p></td>
<td><p>Client must fix errors in their request body</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">401</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Unauthorized</span></code></p></td>
<td><p>Client must authenticate first</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">403</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Forbidden</span></code></p></td>
<td><p>An authenticated client is not allowed to perform the requested action</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">404</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">Found</span></code></p></td>
<td><p>The path to identify the resource is incorrect or the resource does not exist</p></td>
</tr>
</tbody>
</table>
<p>A bad request will include an error message in its response. The message should indicate what the client must change in their request body to succeed.
This failure is seen when creating or updating a resource entity:</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>In the CodingEvents API, the state of a <code class="docutils literal notranslate"><span class="pre">CodingEvent</span></code> is validated using the following criteria:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Title</span></code>: 10-100 characters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: less than 1000 characters</p></li>
</ul>
<p>Imagine a client sending a <code class="docutils literal notranslate"><span class="pre">PATCH</span></code> request to update the <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code> resource entity with an <code class="docutils literal notranslate"><span class="pre">Id</span></code> of <code class="docutils literal notranslate"><span class="pre">6</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">PATCH</span> <span class="pre">/events/6</span> <span class="pre">(PartialCodingEvent)</span> <span class="pre">-&gt;</span> <span class="pre">CodingEvent</span></code></p>
<p>If their request body contains a <code class="docutils literal notranslate"><span class="pre">Title</span></code> field that is too short, the request will receive a <code class="docutils literal notranslate"><span class="pre">400</span></code> status code:</p>
<p>Here is a portion of an invalid request to the <code class="docutils literal notranslate"><span class="pre">PATCH</span> <span class="pre">/events/6</span></code> endpoint:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">{</span>
   <span class="s2">&quot;Title&quot;</span>: <span class="s2">&quot;Foo&quot;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p><code class="docutils literal notranslate"><span class="pre">Foo</span></code> does not contain enough characters to be a valid CodingEvent title. The CodingEvents API response to such a request therefore includes a <code class="docutils literal notranslate"><span class="pre">400</span></code> status code.
This alerts the client that they must correct their data representation. The response body indicates which aspects of the request are invalid.
This is a 400 failed response body:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">{</span>
   <span class="s2">&quot;error&quot;</span>: <span class="s2">&quot;invalid fields&quot;</span>,
   <span class="s2">&quot;fields&quot;</span>: <span class="o">[</span>
      <span class="o">{</span>
         <span class="s2">&quot;Title&quot;</span>: <span class="s2">&quot;must be between 10 and 100 characters in length&quot;</span>
      <span class="o">}</span>
   <span class="o">]</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Using the information in the response, the client can fix their request body and reissue the request successfully.</p>
</div>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">401</span></code>, or <code class="docutils literal notranslate"><span class="pre">Unauthorized</span></code>, status code actually indicates that the consumer is not authenticated. This means the consumer has not proven their
identity to the API. The <code class="docutils literal notranslate"><span class="pre">403</span></code>, or <code class="docutils literal notranslate"><span class="pre">Forbidden</span></code>, status code is a more accurate description of being unauthorized. After authenticating, the
consumer’s authorization can determine if they are allowed or forbidden from taking the requested action.</p>
</div>
</div>
</div>
<div class="section" id="headers">
<h3><span class="section-number">20.3.4.2. </span>Headers<a class="headerlink" href="#headers" title="Permalink to this headline">¶</a></h3>
<p>In RESTful design, HTTP headers communicate metadata about each interaction with a resource.</p>
<table class="colwidths-given docutils align-default" id="id7">
<caption><span class="caption-text">Common request/response headers in REST</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Request/Response</p></th>
<th class="head"><p>Header</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Both</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Content-Type</span></code></p></td>
<td><p>The attached body has the following media type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">application/json</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Request</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Accept</span></code></p></td>
<td><p>The client expects the requested resource representation in the given media type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">application/json</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Response</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Location</span></code></p></td>
<td><p>The created resource representation can be found at the given URL value</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/resources/{id}</span></code></p></td>
</tr>
</tbody>
</table>
<div class="admonition-tip admonition">
<p class="admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> request header is also commonly used.</p>
</div>
</div>
</div>
<div class="section" id="learning-more">
<h2><span class="section-number">20.3.5. </span>Learning More<a class="headerlink" href="#learning-more" title="Permalink to this headline">¶</a></h2>
<p>These articles have covered the fundamental aspects of the RESTful mental model and practical usage. However, RESTful design is a deep topic that even
extends beyond the web and use of HTTP!</p>
<p>If you want to learn more, the following links are a good start:</p>
<div class="section" id="practical-understanding">
<h3><span class="section-number">20.3.5.1. </span>Practical Understanding<a class="headerlink" href="#practical-understanding" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=GZvSYJDk-us&amp;t=0s" target="_blank">Craig Dennis: APIs for beginners (YouTube)<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p></li>
<li><p><a class="reference external" href="https://restful-api-design.readthedocs.io/en/latest/relationships.html" target="_blank">REST sub-collections, relationships and links<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p></li>
<li><p><a class="reference external" href="https://swagger.io/specification/" target="_blank">OpenAPI specification &amp; Swagger REST tools<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p></li>
<li><p>The <a class="reference external" href="https://developer.github.com/v3/" target="_blank">GitHub API<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> and <a class="reference external" href="https://stripe.com/docs/api" target="_blank">Stripe (payment processing) API<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> are excellent examples of RESTful design (and fantastic documentation)</p></li>
</ul>
</div>
<div class="section" id="deep-understanding">
<h3><span class="section-number">20.3.5.2. </span>Deep Understanding<a class="headerlink" href="#deep-understanding" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>the <a class="reference external" href="https://www.restapitutorial.com/lessons/whatisrest.html" target="_blank">REST constraints<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p></li>
<li><p>the <a class="reference external" href="https://www.martinfowler.com/articles/richardsonMaturityModel.html" target="_blank">The Richardson REST maturity model<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p></li>
<li><p>the original <a class="reference external" href="https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm" target="_blank">REST doctoral thesis by Roy Fielding<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p></li>
</ul>
</div>
</div>
<div class="section" id="check-your-understanding">
<h2><span class="section-number">20.3.6. </span>Check Your Understanding<a class="headerlink" href="#check-your-understanding" title="Permalink to this headline">¶</a></h2>
<div class="admonition-question admonition">
<p class="admonition-title"><i class="fas fa-question" aria-hidden="true"></i>Question</p>
<p>A <code class="docutils literal notranslate"><span class="pre">POST</span></code> request performs which type of action?</p>
<ol class="loweralpha simple">
<li><p>Create</p></li>
<li><p>Read</p></li>
<li><p>Update</p></li>
<li><p>Delete</p></li>
</ol>
</div>
<div class="admonition-question admonition">
<p class="admonition-title"><i class="fas fa-question" aria-hidden="true"></i>Question</p>
<p>The _________ portion of a RESTful URL identifies the resource.</p>
<ol class="loweralpha simple">
<li><p>path</p></li>
<li><p>query</p></li>
<li><p>host</p></li>
<li><p>user</p></li>
</ol>
</div>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="rest-abstract.html"><span aria-hidden="true">&larr;</span> <span class="section-number">20.2. </span>What is REST?</a></li>
        
        
        <li class="next"><a href="exercises.html"><span class="section-number">20.4. </span>Exercises: Web APIs and REST <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/web-apis/rest-practical.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>