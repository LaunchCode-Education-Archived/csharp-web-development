<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>14.6. Studio: Spa User Signup &#8212; C# Web Development  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="15. ViewModels and Model Validation" href="../aspdotnet-model-validation/index.html" />
    <link rel="prev" title="14.5. Exercises: Edit Model Classes" href="exercises.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html"><span class="section-number">14. </span>Models and Model Binding</a></li>
    <li class="active"><span class="section-number">14.6. </span>Studio: Spa User Signup</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content " role="main">

    
  <div class="section" id="studio-spa-user-signup">
<span id="user-signup-studio"></span><h1><span class="section-number">14.6. </span>Studio: Spa User Signup<a class="headerlink" href="#studio-spa-user-signup" title="Permalink to this headline">¶</a></h1>
<p>For this studio you will add functionality to allow users to sign up for your <code class="docutils literal notranslate"><span class="pre">SpaDay</span></code> app.</p>
<p>The starter code has been modified from where you left off last class. Grab the refactored code
on the <a class="reference external" href="https://github.com/LaunchCodeEducation/SpaDay/tree/user-signup-starter" target="_blank">user-signup-starter branch<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
<p>You’ll notice in this branch that the name has been removed from the service selection form. Once we
implement user-signup functionality, we can use a given user’s name to identify the spa client. We’ve also
moved data into a <code class="docutils literal notranslate"><span class="pre">Client</span></code> model and out of the <code class="docutils literal notranslate"><span class="pre">SpaController</span></code> class.</p>
<p>In this studio, we’ll ask you to write another model, <code class="docutils literal notranslate"><span class="pre">User</span></code>. <code class="docutils literal notranslate"><span class="pre">User</span></code> and <code class="docutils literal notranslate"><span class="pre">Client</span></code> may at first
appear redundant, but in the future as you develop your spa application, you may find a scenario where
a user is logging in who is not also <code class="docutils literal notranslate"><span class="pre">Client</span></code>.</p>
<div class="section" id="getting-ready">
<h2><span class="section-number">14.6.1. </span>Getting Ready<a class="headerlink" href="#getting-ready" title="Permalink to this headline">¶</a></h2>
<p>Within <code class="docutils literal notranslate"><span class="pre">SpaDay</span></code>, create the following files.</p>
<ol class="arabic simple">
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">UserController</span></code> in <code class="docutils literal notranslate"><span class="pre">Controllers</span></code>.</p></li>
<li><p>Create a new folder, <code class="docutils literal notranslate"><span class="pre">User</span></code>, within <code class="docutils literal notranslate"><span class="pre">Views</span></code>.</p></li>
<li><p>Create <code class="docutils literal notranslate"><span class="pre">Index.cshtml</span></code> and <code class="docutils literal notranslate"><span class="pre">Add.cshtml</span></code> templates within <code class="docutils literal notranslate"><span class="pre">Views/User/</span></code>.</p></li>
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">User</span></code> class within <code class="docutils literal notranslate"><span class="pre">Models</span></code>.</p></li>
</ol>
</div>
<div class="section" id="creating-the-model">
<h2><span class="section-number">14.6.2. </span>Creating the Model<a class="headerlink" href="#creating-the-model" title="Permalink to this headline">¶</a></h2>
<p>Your <code class="docutils literal notranslate"><span class="pre">User</span></code> class should have a few properties: <code class="docutils literal notranslate"><span class="pre">Username</span></code>, <code class="docutils literal notranslate"><span class="pre">Email</span></code>, and <code class="docutils literal notranslate"><span class="pre">Password</span></code>.</p>
</div>
<div class="section" id="rendering-the-add-user-form">
<h2><span class="section-number">14.6.3. </span>Rendering the Add User Form<a class="headerlink" href="#rendering-the-add-user-form" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">UserController</span></code>, create an action method <code class="docutils literal notranslate"><span class="pre">Add()</span></code> to
render the form. This action method should correspond to the path
<code class="docutils literal notranslate"><span class="pre">/user/add</span></code>, and for now, it can just return the <code class="docutils literal notranslate"><span class="pre">Add.cshtml</span></code> view.</p>
<div class="admonition-tip admonition">
<p class="admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>Don’t forget to add <code class="docutils literal notranslate"><span class="pre">/user/add</span></code> to your path when you test your new features.</p>
</div>
</li>
<li><p>Within the <code class="docutils literal notranslate"><span class="pre">Add.cshtml</span></code> template, create a form that accepts inputs for
each of the <code class="docutils literal notranslate"><span class="pre">User</span></code> class properties. Include an additional password input field to verify
the password input. The form should be set up to <code class="docutils literal notranslate"><span class="pre">POST</span></code> to <code class="docutils literal notranslate"><span class="pre">/user</span></code>.</p></li>
<li><p>Be sure to set <code class="docutils literal notranslate"><span class="pre">type=&quot;password&quot;</span></code> for the password and verify inputs,
to ensure the passwords are not visible when being typed into the form.
You can also set <code class="docutils literal notranslate"><span class="pre">type=&quot;email&quot;</span></code> on the email input, which will enable
some basic client-side validation. We’ll tackle validation in more detail
in the next lesson.</p></li>
</ol>
</div>
<div class="section" id="processing-form-submission">
<h2><span class="section-number">14.6.4. </span>Processing Form Submission<a class="headerlink" href="#processing-form-submission" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Within the <code class="docutils literal notranslate"><span class="pre">UserController</span></code>, create an action method with this signature:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">SubmitAddUserForm</span><span class="p">(</span><span class="n">User</span> <span class="n">newUser</span><span class="p">,</span> <span class="kt">string</span> <span class="n">verify</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">// add form submission handling code here</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This will use model binding to create a new user object, <code class="docutils literal notranslate"><span class="pre">newUser</span></code>, and
pass it into your action method.</p>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>You don’t need to store the <code class="docutils literal notranslate"><span class="pre">User</span></code> object anywhere for this studio.
We’re focusing on form handling and validation in this exercise. If you
want to keep track of users using the method we employed in the models
lesson video, check out the Bonus Missions below.</p>
</div>
</li>
<li><p>Check that the <code class="docutils literal notranslate"><span class="pre">verify</span></code> parameter matches the
password within the <code class="docutils literal notranslate"><span class="pre">newUser</span></code> object.</p>
<ol class="loweralpha simple">
<li><p>If it does, store the user’s name in a <code class="docutils literal notranslate"><span class="pre">ViewBag</span></code> property and render the <code class="docutils literal notranslate"><span class="pre">User/Index.cshtml</span></code> view by returning <code class="docutils literal notranslate"><span class="pre">View(&quot;Index&quot;)</span></code>.</p></li>
<li><p>If the passwords don’t match, render the form again.</p></li>
</ol>
</li>
</ol>
</div>
<div class="section" id="refining-form-submission">
<h2><span class="section-number">14.6.5. </span>Refining Form Submission<a class="headerlink" href="#refining-form-submission" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Once registered, we want the user to access the form selecting their spa services and see a personalized welcome message!</p>
<ol class="loweralpha simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">User/Index.cshtml</span></code>, add an <code class="docutils literal notranslate"><span class="pre">h1</span></code> element with a welcome message. Use the <code class="docutils literal notranslate"><span class="pre">ViewBag</span></code> property containing the user’s name to personalize the message!</p></li>
<li><p>Also in <code class="docutils literal notranslate"><span class="pre">User/Index.cshtml</span></code>, add an <code class="docutils literal notranslate"><span class="pre">a</span></code> element to take the user back to the path, <code class="docutils literal notranslate"><span class="pre">/spa</span></code>, where the <code class="docutils literal notranslate"><span class="pre">Spa/Index.cshtml</span></code> template will be rendered.</p></li>
</ol>
</li>
<li><p>If the form is re-rendered when a password is not verified, we should let the user know that their form
was not properly submitted. Add an <code class="docutils literal notranslate"><span class="pre">error</span></code> property to <code class="docutils literal notranslate"><span class="pre">ViewBag</span></code> letting the user know
that their passwords should match. This property will need to correspond to an element in the template that will only render the error text when the passwords do not match.</p></li>
<li><p>If we send a user back to re-populate the form, it would be nice to not clear their previous
submission. We won’t need to save the password entries in this fashion.</p>
<ol class="loweralpha simple">
<li><p>In the form submission action method, add the <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">email</span></code> fields of the submitted user as
<code class="docutils literal notranslate"><span class="pre">ViewBag</span></code> properties.</p></li>
<li><p>Back in the form, add a value attribute to these form fields and make them equal to the
<code class="docutils literal notranslate"><span class="pre">ViewBag</span></code> properties.</p></li>
</ol>
</li>
</ol>
</div>
<div class="section" id="bonus-missions">
<h2><span class="section-number">14.6.6. </span>Bonus Missions<a class="headerlink" href="#bonus-missions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Add a <code class="docutils literal notranslate"><span class="pre">Date</span></code> property in <code class="docutils literal notranslate"><span class="pre">User</span></code>, and initialize it to the time the
user joined (i.e. when the <code class="docutils literal notranslate"><span class="pre">User</span></code> object was created).</p></li>
<li><p>At the bottom of <code class="docutils literal notranslate"><span class="pre">User/Index.cshtml</span></code>, add a <code class="docutils literal notranslate"><span class="pre">div</span></code>.
Inside that element, add account details such as the user’s email and the date they joined.</p></li>
</ol>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="exercises.html"><span aria-hidden="true">&larr;</span> <span class="section-number">14.5. </span>Exercises: Edit Model Classes</a></li>
        
        
        <li class="next"><a href="../aspdotnet-model-validation/index.html"><span class="section-number">15. </span>ViewModels and Model Validation <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/aspdotnet-model-classes/studio.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>